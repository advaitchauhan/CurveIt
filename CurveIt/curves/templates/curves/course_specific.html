<!DOCTYPE html>
<html>
	<head>
		<title>Curves</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script src="http://code.highcharts.com/highcharts.js"></script>
	<head>
	<body>
		<h1 class="title">{{ course }}</h1>
		<div id="container" style="width:100%; height:400px;"></div>
		<table class="thisTable">
			{% for grade in grades %}
				<tr>
					<td class="_grade" hidden>{{ grade }}</td>
				</tr>
			{% endfor %}
		</table>
		<table class="thisTable">
			{% for num in numGrades %}
				<tr>
					<td class="_numGrade" hidden>{{ num }}</td>
				</tr>
			{% endfor %}
		</table>
		<script>
			var _grades = [];
			var _numGrades = [];
			var courseTitle = ""
			$('.title').each(function(index){
				console.log("hi");
				courseTitle = $(this).text();
			});
			$('._grade').each(function(index){
				console.log("hi");
				_grades.push($(this).text());
			});
			$('._numGrade').each(function(index){
				_numGrades.push($(this).text());
			});
			for (var i = 0; i < _numGrades.length; i++)
			{
				_numGrades[i] = parseInt(_numGrades[i]);
			}
			$(function () { 
    			$('#container').highcharts({
			        chart: {
			            type: 'column'
			        },
			        title: {
			            text: courseTitle
			        },
			        xAxis: {
			        	categories: _grades,
			        	title: {
			        		text: "Grades"
			        	}
			        },
			        yAxis: {
			        	title: {
			        		text: "Numbers"
			        	}
			        },
			        plotOptions: {
            			column: {
                			pointPadding: 0.2,
                			borderWidth: 0
            			}
        			},
        			legend: {
        				enabled: false
        			},
        			tooltip: {
            			pointFormat: 'Count: <b>{point.y}</b><br/>'
        			},
			        series: [{
			        	name: courseTitle, 
			        	data: _numGrades
			        }]
			    });
			});
		</script>
	</body>
</html>